Function Pulse{
  i = (-cos(2.0 * x * PPS * PI) / 2.0) + 0.5;

  ledcWrite(PWMChannel, PWMMax * i);

  t += dt;
}

if (x >= (1/PPS) * 1000) {
  x = x - (1/PPS) * 1000;
}